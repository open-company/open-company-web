shadow$provide.module$node_modules$emoji_mart$dist$components$picker=function(global,require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});global=require("module$node_modules$emoji_mart$dist$polyfills$extends");var _extends3=_interopRequireDefault(global);global=require("module$node_modules$emoji_mart$dist$polyfills$objectGetPrototypeOf");var _objectGetPrototypeOf2=_interopRequireDefault(global);
global=require("module$node_modules$babel_runtime$helpers$classCallCheck");var _classCallCheck3=_interopRequireDefault(global);global=require("module$node_modules$emoji_mart$dist$polyfills$createClass");var _createClass3=_interopRequireDefault(global);global=require("module$node_modules$emoji_mart$dist$polyfills$possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(global);global=require("module$node_modules$emoji_mart$dist$polyfills$inherits");var _inherits3=_interopRequireDefault(global);
require("module$node_modules$emoji_mart$dist$vendor$raf_polyfill");global=require("module$node_modules$react$index");var _react2=_interopRequireDefault(global);global=require("module$node_modules$prop_types$index");_interopRequireDefault(global);global=require("module$node_modules$emoji_mart$dist$data$index");var _data2=_interopRequireDefault(global);global=require("module$node_modules$emoji_mart$dist$utils$store");var _store2=_interopRequireDefault(global);global=require("module$node_modules$emoji_mart$dist$utils$frequently");
var _frequently2=_interopRequireDefault(global),_utils=require("module$node_modules$emoji_mart$dist$utils$index"),_=require("module$node_modules$emoji_mart$dist$components$index"),RECENT_CATEGORY={name:"Recent",emojis:null},SEARCH_CATEGORY={name:"Search",emojis:null,anchor:!1},CUSTOM_CATEGORY={name:"Custom",emojis:[]},I18N={search:"Search",notfound:"No Emoji Found",categories:{search:"Search Results",recent:"Frequently Used",people:"Smileys \x26 People",nature:"Animals \x26 Nature",foods:"Food \x26 Drink",
activity:"Activity",places:"Travel \x26 Places",objects:"Objects",symbols:"Symbols",flags:"Flags",custom:"Custom"}};require=function(_React$PureComponent){function Picker(props){(0,_classCallCheck3.default)(this,Picker);var _this=(0,_possibleConstructorReturn3.default)(this,(Picker.__proto__||(0,_objectGetPrototypeOf2.default)(Picker)).call(this,props));_this.i18n=(0,_utils.deepMerge)(I18N,props.i18n);_this.state={skin:_store2.default.get("skin")||props.skin,firstRender:!0};_this.categories=[];var allCategories=
[].concat(_data2.default.categories);0<props.custom.length&&(CUSTOM_CATEGORY.emojis=props.custom.map(function(emoji){return(0,_extends3.default)({},emoji,{id:emoji.short_names[0],custom:!0})}),allCategories.push(CUSTOM_CATEGORY));_this.hideRecent=!0;void 0!=props.include&&allCategories.sort(function(a,b){a=a.name.toLowerCase();b=b.name.toLowerCase();return props.include.indexOf(a)>props.include.indexOf(b)?1:0});for(var categoryIndex=0;categoryIndex<allCategories.length;categoryIndex++){var category=
allCategories[categoryIndex],isIncluded=props.include&&props.include.length?-1<props.include.indexOf(category.name.toLowerCase()):!0,isExcluded=props.exclude&&props.exclude.length?-1<props.exclude.indexOf(category.name.toLowerCase()):!1;if(isIncluded&&!isExcluded)if(props.emojisToShowFilter){isIncluded=[];isExcluded=category.emojis;for(var emojiIndex=0;emojiIndex<isExcluded.length;emojiIndex++){var emoji$jscomp$0=isExcluded[emojiIndex];props.emojisToShowFilter(_data2.default.emojis[emoji$jscomp$0]||
emoji$jscomp$0)&&isIncluded.push(emoji$jscomp$0)}isIncluded.length&&_this.categories.push({emojis:isIncluded,name:category.name})}else _this.categories.push(category)}allCategories=props.include&&props.include.length?-1<props.include.indexOf("recent"):!0;categoryIndex=props.exclude&&props.exclude.length?-1<props.exclude.indexOf("recent"):!1;allCategories&&!categoryIndex&&(_this.hideRecent=!1,_this.categories.unshift(RECENT_CATEGORY));_this.categories[0]&&(_this.categories[0].first=!0);_this.categories.unshift(SEARCH_CATEGORY);
_this.setAnchorsRef=_this.setAnchorsRef.bind(_this);_this.handleAnchorClick=_this.handleAnchorClick.bind(_this);_this.setSearchRef=_this.setSearchRef.bind(_this);_this.handleSearch=_this.handleSearch.bind(_this);_this.setScrollRef=_this.setScrollRef.bind(_this);_this.handleScroll=_this.handleScroll.bind(_this);_this.handleScrollPaint=_this.handleScrollPaint.bind(_this);_this.handleEmojiOver=_this.handleEmojiOver.bind(_this);_this.handleEmojiLeave=_this.handleEmojiLeave.bind(_this);_this.handleEmojiClick=
_this.handleEmojiClick.bind(_this);_this.setPreviewRef=_this.setPreviewRef.bind(_this);_this.handleSkinChange=_this.handleSkinChange.bind(_this);return _this}(0,_inherits3.default)(Picker,_React$PureComponent);(0,_createClass3.default)(Picker,[{key:"componentWillReceiveProps",value:function(props){props.skin&&!_store2.default.get("skin")&&this.setState({skin:props.skin})}},{key:"componentDidMount",value:function(){var _this2=this;this.state.firstRender&&(this.testStickyPosition(),this.firstRenderTimeout=
setTimeout(function(){_this2.setState({firstRender:!1})},60))}},{key:"componentDidUpdate",value:function(){this.updateCategoriesSize();this.handleScroll()}},{key:"componentWillUnmount",value:function(){SEARCH_CATEGORY.emojis=null;clearTimeout(this.leaveTimeout);clearTimeout(this.firstRenderTimeout)}},{key:"testStickyPosition",value:function(){var stickyTestElement=document.createElement("div");["","-webkit-","-ms-","-moz-","-o-"].forEach(function(prefix){return stickyTestElement.style.position=prefix+
"sticky"});this.hasStickyPosition=!!stickyTestElement.style.position.length}},{key:"handleEmojiOver",value:function(emoji){var preview=this.preview;if(preview){var emojiData=CUSTOM_CATEGORY.emojis.filter(function(customEmoji){return customEmoji.id===emoji.id})[0],key;for(key in emojiData)emojiData.hasOwnProperty(key)&&(emoji[key]=emojiData[key]);preview.setState({emoji:emoji});clearTimeout(this.leaveTimeout)}}},{key:"handleEmojiLeave",value:function(emoji){var preview=this.preview;preview&&(this.leaveTimeout=
setTimeout(function(){preview.setState({emoji:null})},16))}},{key:"handleEmojiClick",value:function(emoji,e){var _this3=this;this.props.onClick(emoji,e);this.hideRecent||this.props.recent||_frequently2.default.add(emoji);var component=this.categoryRefs["category-1"];if(component){var maxMargin=component.maxMargin;component.forceUpdate();window.requestAnimationFrame(function(){_this3.scroll&&(component.memoizeSize(),maxMargin!=component.maxMargin&&(_this3.updateCategoriesSize(),_this3.handleScrollPaint(),
SEARCH_CATEGORY.emojis&&component.updateDisplay("none")))})}}},{key:"handleScroll",value:function(){this.waitingForPaint||(this.waitingForPaint=!0,window.requestAnimationFrame(this.handleScrollPaint))}},{key:"handleScrollPaint",value:function(){this.waitingForPaint=!1;if(this.scroll){var activeCategory=null;if(SEARCH_CATEGORY.emojis)activeCategory=SEARCH_CATEGORY;else{for(var scrollTop=this.scroll.scrollTop,scrollingDown=scrollTop>(this.scrollTop||0),minTop=0,i=0,l=this.categories.length;i<l;i++){var ii=
scrollingDown?this.categories.length-1-i:i,category$jscomp$0=this.categories[ii];if(ii=this.categoryRefs["category-"+ii]){var active=ii.handleScroll(scrollTop);(!minTop||ii.top<minTop)&&0<ii.top&&(minTop=ii.top);active&&!activeCategory&&(activeCategory=category$jscomp$0)}}scrollTop<minTop?activeCategory=this.categories.filter(function(category){return!1!==category.anchor})[0]:scrollTop+this.clientHeight>=this.scrollHeight&&(activeCategory=this.categories[this.categories.length-1])}activeCategory&&
(scrollingDown=this.anchors,activeCategory=activeCategory.name,scrollingDown.state.selected!=activeCategory&&scrollingDown.setState({selected:activeCategory}));this.scrollTop=scrollTop}}},{key:"handleSearch",value:function(emojis){SEARCH_CATEGORY.emojis=emojis;for(var i=0,l=this.categories.length;i<l;i++){var component=this.categoryRefs["category-"+i];component&&"Search"!=component.props.name&&component.updateDisplay(emojis?"none":"inherit")}this.forceUpdate();this.scroll.scrollTop=0;this.handleScroll()}},
{key:"handleAnchorClick",value:function(category,i){var component=this.categoryRefs["category-"+i],scroll=this.scroll;i=null;i=function(){if(component){var top=component.top;top=category.first?0:top+1;scroll.scrollTop=top}};SEARCH_CATEGORY.emojis?(this.handleSearch(null),this.search.clear(),window.requestAnimationFrame(i)):i()}},{key:"handleSkinChange",value:function(skin){skin={skin:skin};this.setState(skin);_store2.default.update(skin)}},{key:"updateCategoriesSize",value:function(){for(var i=0,
l=this.categories.length;i<l;i++){var component=this.categoryRefs["category-"+i];component&&component.memoizeSize()}this.scroll&&(i=this.scroll,this.scrollHeight=i.scrollHeight,this.clientHeight=i.clientHeight)}},{key:"getCategories",value:function(){return this.state.firstRender?this.categories.slice(0,3):this.categories}},{key:"setAnchorsRef",value:function(c){this.anchors=c}},{key:"setSearchRef",value:function(c){this.search=c}},{key:"setPreviewRef",value:function(c){this.preview=c}},{key:"setScrollRef",
value:function(c){this.scroll=c}},{key:"setCategoryRef",value:function(name,c){this.categoryRefs||(this.categoryRefs={});this.categoryRefs[name]=c}},{key:"render",value:function(){var _this4=this,_props=this.props,perLine=_props.perLine,emojiSize=_props.emojiSize,set=_props.set,sheetSize=_props.sheetSize,style=_props.style,title=_props.title,emoji=_props.emoji,color=_props.color,native=_props.native,backgroundImageFn=_props.backgroundImageFn,emojisToShowFilter=_props.emojisToShowFilter,showPreview=
_props.showPreview,emojiTooltip=_props.emojiTooltip,include=_props.include,exclude=_props.exclude,recent=_props.recent;_props=_props.autoFocus;var skin=this.state.skin,width=perLine*(emojiSize+12)+14+(0,_utils.measureScrollbar)();return _react2.default.createElement("div",{style:(0,_extends3.default)({width:width},style),className:"emoji-mart"},_react2.default.createElement("div",{className:"emoji-mart-bar"},_react2.default.createElement(_.Anchors,{ref:this.setAnchorsRef,i18n:this.i18n,color:color,
categories:this.categories,onAnchorClick:this.handleAnchorClick})),_react2.default.createElement(_.Search,{ref:this.setSearchRef,onSearch:this.handleSearch,i18n:this.i18n,emojisToShowFilter:emojisToShowFilter,include:include,exclude:exclude,custom:CUSTOM_CATEGORY.emojis,autoFocus:_props}),_react2.default.createElement("div",{ref:this.setScrollRef,className:"emoji-mart-scroll",onScroll:this.handleScroll},this.getCategories().map(function(category,i){return _react2.default.createElement(_.Category,
{ref:_this4.setCategoryRef.bind(_this4,"category-"+i),key:category.name,name:category.name,emojis:category.emojis,perLine:perLine,native:native,hasStickyPosition:_this4.hasStickyPosition,i18n:_this4.i18n,recent:"Recent"==category.name?recent:void 0,custom:"Recent"==category.name?CUSTOM_CATEGORY.emojis:void 0,emojiProps:{native:native,skin:skin,size:emojiSize,set:set,sheetSize:sheetSize,forceSize:native,tooltip:emojiTooltip,backgroundImageFn:backgroundImageFn,onOver:_this4.handleEmojiOver,onLeave:_this4.handleEmojiLeave,
onClick:_this4.handleEmojiClick}})})),showPreview&&_react2.default.createElement("div",{className:"emoji-mart-bar"},_react2.default.createElement(_.Preview,{ref:this.setPreviewRef,title:title,emoji:emoji,emojiProps:{native:native,size:38,skin:skin,set:set,sheetSize:sheetSize,backgroundImageFn:backgroundImageFn},skinsProps:{skin:skin,onChange:this.handleSkinChange}})))}}]);return Picker}(_react2.default.PureComponent);exports.default=require;require.defaultProps={onClick:function(){},emojiSize:24,
perLine:9,i18n:{},style:{},title:"Emoji Martâ„¢",emoji:"department_store",color:"#ae65c5",set:_.Emoji.defaultProps.set,skin:_.Emoji.defaultProps.skin,native:_.Emoji.defaultProps.native,sheetSize:_.Emoji.defaultProps.sheetSize,backgroundImageFn:_.Emoji.defaultProps.backgroundImageFn,emojisToShowFilter:null,showPreview:!0,emojiTooltip:_.Emoji.defaultProps.tooltip,autoFocus:!1,custom:[]}}
//# sourceMappingURL=module$node_modules$emoji_mart$dist$components$picker.js.map
