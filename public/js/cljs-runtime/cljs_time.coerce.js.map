{"version":3,"sources":["cljs_time/coerce.cljs"],"mappings":"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","names":["cljs-time$coerce$ICoerce$to_date_time$dyn","x__4428__auto__","m__4429__auto__","cljs-time.coerce/to-date-time","goog/typeOf","m__4426__auto__","cljs.core/missing-protocol","cljs-time.coerce/ICoerce","obj","cljs-time.coerce/from-long","millis","G__47129","goog.date.UtcDateTime/fromTimestamp","cljs-time.coerce/from-string","s","cljs.core/first","iter__4529__auto__","s__47134","cljs.core/LazySeq","temp__5735__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4527__auto__","size__4528__auto__","cljs.core/count","b__47136","cljs.core/chunk-buffer","i__47135","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__47133","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","f","cljs.core/vals","cljs-time.format/formatters","d","e47139","e47140","cljs_time.format.parse","js/Error","_","cljs-time.coerce/from-date","date","G__47141","cljs-time.coerce/to-long","G__47142","cljs-time.coerce/to-epoch","and__4115__auto__","cljs.core/quot","cljs-time.coerce/to-date","G__47143","js/Date","cljs-time.coerce/to-string","G__47145","cljs-time.format/unparse","cljs-time.coerce/to-local-date","cljs.core._EQ_","js/goog.date.Date","cljs.core/type","temp__5733__auto__","dt","cljs-time.coerce/to-local-date-time","G__47154","js/goog.date.DateTime","goog.object/set","cljs.core/PROTOCOL_SENTINEL","local-date","cljs-time.core/to-utc-time-zone","local-date-time","js/goog.date.UtcDateTime","date-time","long","string","cljs.core/chunk-first"],"sourcesContent":["(ns cljs-time.coerce\n  \"### Utilites to coerce goog.date DateTime instances to and from\n  various other types.\n\n  For example, to convert a goog.date DateTime to and from a js number:\n\n```clojure\n=> (to-long (date-time 1998 4 25))\n893462400000\n\n=> (from-long 893462400000)\n#<19980425T000000>\n```\"\n  (:refer-clojure :exclude [extend second])\n  (:require\n    [cljs-time.core :refer\n     [date-time to-utc-time-zone from-default-time-zone year month day\n      hour minute second milli]]\n    [cljs-time.format :as time-fmt])\n  (:import [goog.date UtcDateTime]))\n\n(defprotocol ICoerce\n  (to-date-time [obj] \"Convert `obj` to a goog.date.DateTime instance.\"))\n\n(defn from-long\n  \"Returns a DateTime instance in the UTC time zone corresponding to the given\n  number of milliseconds after the Unix epoch.\"\n  [millis]\n  (some-> millis UtcDateTime.fromTimestamp))\n\n(defn from-string\n  \"Returns DateTime instance from string using formatters in cljs-time.format,\n  returning first which parses\"\n  [s]\n  (when s\n    (first\n     (for [f (vals time-fmt/formatters)\n           :let [d (try (time-fmt/parse f s) (catch js/Error _))]\n           :when d] d))))\n\n(defn from-date\n  \"Returns a DateTime instance in the UTC time zone corresponding to the given\n  js Date object.\"\n  [date]\n  (some-> date .getTime from-long))\n\n(defn to-long\n  \"Convert `obj` to the number of milliseconds after the Unix epoch.\"\n  [obj]\n  (some-> obj to-date-time .getTime))\n\n(defn to-epoch\n  \"Convert `obj` to Unix epoch.\"\n  [obj]\n  (let [millis (to-long obj)]\n    (and millis (quot millis 1000))))\n\n(defn to-date\n  \"Convert `obj` to a JavaScript Date instance.\"\n  [obj]\n  (some-> obj to-date-time .getTime js/Date.))\n\n(defn to-string\n  \"Returns a string representation of obj in UTC time-zone\n  using \\\"yyyy-MM-dd'T'HH:mm:ss.SSSZZ\\\" date-time representation.\"\n  [obj]\n  (some->> obj\n           to-date-time\n           (time-fmt/unparse (:date-time time-fmt/formatters))))\n\n(defn to-local-date\n  \"Convert `obj` to a goog.date.Date instance\"\n  [obj]\n  (when obj\n    (if (= goog.date.Date (type obj))\n      obj\n      (if-let [dt (to-date-time obj)]\n        (goog.date.Date. (.getYear dt) (.getMonth dt) (.getDate dt))))))\n\n(defn to-local-date-time\n  \"Convert `obj` to a goog.date.DateTime instance\"\n  [obj]\n  (when obj\n    (if-let [dt (to-date-time obj)]\n      (doto (goog.date.DateTime. (.getYear dt) (.getMonth dt) (.getDate dt))\n        (.setHours (.getHours dt))\n        (.setMinutes (.getMinutes dt))\n        (.setSeconds (.getSeconds dt))\n        (.setMilliseconds (.getMilliseconds dt))))))\n\n(extend-protocol ICoerce\n  nil\n  (to-date-time [_]\n    nil)\n\n  js/Date\n  (to-date-time [date]\n    (from-date date))\n\n  goog.date.Date\n  (to-date-time [local-date]\n    (when local-date\n      (to-utc-time-zone local-date)))\n\n  goog.date.DateTime\n  (to-date-time [local-date-time]\n    (when local-date-time\n      (to-utc-time-zone local-date-time)))\n\n  goog.date.UtcDateTime\n  (to-date-time [date-time]\n    date-time)\n\n  number\n  (to-date-time [long]\n    (from-long long))\n\n  string\n  (to-date-time [string]\n    (from-string string)))\n"]}