shadow$provide.module$node_modules$localforage$dist$localforage=function(global$jscomp$0,require,module,exports){(function(f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define([],f):("undefined"!==typeof window?window:"undefined"!==typeof global$jscomp$0?global$jscomp$0:"undefined"!==typeof self?self:this).localforage=f()})(function(){return function e$jscomp$0(t,n$jscomp$0,r){function s(o,u){if(!n$jscomp$0[o]){if(!t[o]){var a=
"function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);u=Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u;}u=n$jscomp$0[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return s(n?n:e)},u,u.exports,e$jscomp$0,t,n$jscomp$0,r)}return n$jscomp$0[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){(function(global){function nextTick(){draining=!0;for(var i,oldQueue,
len=queue.length;len;){oldQueue=queue;queue=[];for(i=-1;++i<len;)oldQueue[i]();len=queue.length}draining=!1}var Mutation=global.MutationObserver||global.WebKitMutationObserver;if(Mutation){var called=0;Mutation=new Mutation(nextTick);var element=global.document.createTextNode("");Mutation.observe(element,{characterData:!0});var scheduleDrain=function(){element.data=called=++called%2}}else if(global.setImmediate||"undefined"===typeof global.MessageChannel)scheduleDrain="document"in global&&"onreadystatechange"in
global.document.createElement("script")?function(){var scriptEl=global.document.createElement("script");scriptEl.onreadystatechange=function(){nextTick();scriptEl.onreadystatechange=null;scriptEl.parentNode.removeChild(scriptEl);scriptEl=null};global.document.documentElement.appendChild(scriptEl)}:function(){setTimeout(nextTick,0)};else{var channel=new global.MessageChannel;channel.port1.onmessage=nextTick;scheduleDrain=function(){channel.port2.postMessage(0)}}var draining,queue=[];module.exports=
function(task){1!==queue.push(task)||draining||scheduleDrain()}}).call(this,"undefined"!==typeof global$jscomp$0?global$jscomp$0:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(_dereq_,module,exports){function INTERNAL(){}function Promise(resolver){if("function"!==typeof resolver)throw new TypeError("resolver must be a function");this.state=PENDING;this.queue=[];this.outcome=void 0;resolver!==INTERNAL&&safelyResolveThenable(this,resolver)}function QueueItem(promise,
onFulfilled,onRejected){this.promise=promise;"function"===typeof onFulfilled&&(this.onFulfilled=onFulfilled,this.callFulfilled=this.otherCallFulfilled);"function"===typeof onRejected&&(this.onRejected=onRejected,this.callRejected=this.otherCallRejected)}function unwrap(promise,func,value){immediate(function(){try{var returnValue=func(value)}catch(e){return handlers.reject(promise,e)}returnValue===promise?handlers.reject(promise,new TypeError("Cannot resolve promise with itself")):handlers.resolve(promise,
returnValue)})}function getThen(obj){var then=obj&&obj.then;if(obj&&"object"===typeof obj&&"function"===typeof then)return function(){then.apply(obj,arguments)}}function safelyResolveThenable(self,thenable){function onError(value){called||(called=!0,handlers.reject(self,value))}function onSuccess(value){called||(called=!0,handlers.resolve(self,value))}var called=!1,result=tryCatch(function(){thenable(onSuccess,onError)});"error"===result.status&&onError(result.value)}function tryCatch(func,value){var out=
{};try{out.value=func(value),out.status="success"}catch(e){out.status="error",out.value=e}return out}var immediate=_dereq_(1),handlers={},REJECTED=["REJECTED"],FULFILLED=["FULFILLED"],PENDING=["PENDING"];module.exports=exports=Promise;Promise.prototype["catch"]=function(onRejected){return this.then(null,onRejected)};Promise.prototype.then=function(onFulfilled,onRejected){if("function"!==typeof onFulfilled&&this.state===FULFILLED||"function"!==typeof onRejected&&this.state===REJECTED)return this;var promise=
new this.constructor(INTERNAL);this.state!==PENDING?unwrap(promise,this.state===FULFILLED?onFulfilled:onRejected,this.outcome):this.queue.push(new QueueItem(promise,onFulfilled,onRejected));return promise};QueueItem.prototype.callFulfilled=function(value){handlers.resolve(this.promise,value)};QueueItem.prototype.otherCallFulfilled=function(value){unwrap(this.promise,this.onFulfilled,value)};QueueItem.prototype.callRejected=function(value){handlers.reject(this.promise,value)};QueueItem.prototype.otherCallRejected=
function(value){unwrap(this.promise,this.onRejected,value)};handlers.resolve=function(self,value){var result=tryCatch(getThen,value);if("error"===result.status)return handlers.reject(self,result.value);if(result=result.value)safelyResolveThenable(self,result);else{self.state=FULFILLED;self.outcome=value;result=-1;for(var len=self.queue.length;++result<len;)self.queue[result].callFulfilled(value)}return self};handlers.reject=function(self,error){self.state=REJECTED;self.outcome=error;for(var i=-1,
len=self.queue.length;++i<len;)self.queue[i].callRejected(error);return self};exports.resolve=function(value){return value instanceof this?value:handlers.resolve(new this(INTERNAL),value)};exports.reject=function(reason){var promise=new this(INTERNAL);return handlers.reject(promise,reason)};exports.all=function(iterable){function allResolver(value,i){self.resolve(value).then(function(outValue){values[i]=outValue;++resolved!==len||called||(called=!0,handlers.resolve(promise,values))},function(error){called||
(called=!0,handlers.reject(promise,error))})}var self=this;if("[object Array]"!==Object.prototype.toString.call(iterable))return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var values=Array(len),resolved=0,i$jscomp$0=-1,promise=new this(INTERNAL);++i$jscomp$0<len;)allResolver(iterable[i$jscomp$0],i$jscomp$0);return promise};exports.race=function(iterable){function resolver(value){self.resolve(value).then(function(response){called||
(called=!0,handlers.resolve(promise,response))},function(error){called||(called=!0,handlers.reject(promise,error))})}var self=this;if("[object Array]"!==Object.prototype.toString.call(iterable))return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var i=-1,promise=new this(INTERNAL);++i<len;)resolver(iterable[i]);return promise}},{1:1}],3:[function(_dereq_,module,exports){module="undefined"!==typeof global$jscomp$0?global$jscomp$0:
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};"function"!==typeof module.Promise&&(module.Promise=_dereq_(2))},{2:2}],4:[function(_dereq_,module,exports){function createBlob(parts,properties){parts=parts||[];properties=properties||{};try{return new Blob(parts,properties)}catch(e){if("TypeError"!==e.name)throw e;for(var builder=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:
WebKitBlobBuilder),i=0;i<parts.length;i+=1)builder.append(parts[i]);return builder.getBlob(properties.type)}}function executeCallback(promise,callback){callback&&promise.then(function(result){callback(null,result)},function(error){callback(error)})}function executeTwoCallbacks(promise,callback,errorCallback){"function"===typeof callback&&promise.then(callback);if("function"===typeof errorCallback)promise["catch"](errorCallback)}function normalizeKey(key){"string"!==typeof key&&(console.warn(key+" used as a key, but it is not a string."),
key=String(key));return key}function _checkBlobSupportWithoutCaching(idb){return(new Promise$1(function(resolve){var txn=idb.transaction("local-forage-detect-blob-support","readwrite"),blob=createBlob([""]);txn.objectStore("local-forage-detect-blob-support").put(blob,"key");txn.onabort=function(e){e.preventDefault();e.stopPropagation();resolve(!1)};txn.oncomplete=function(){var matchedChrome=navigator.userAgent.match(/Chrome\/(\d+)/),matchedEdge=navigator.userAgent.match(/Edge\//);resolve(matchedEdge||
!matchedChrome||43<=parseInt(matchedChrome[1],10))}}))["catch"](function(){return!1})}function _checkBlobSupport(idb){return"boolean"===typeof supportsBlobs?Promise$1.resolve(supportsBlobs):_checkBlobSupportWithoutCaching(idb).then(function(value){return supportsBlobs=value})}function _deferReadiness(dbInfo){dbInfo=dbContexts[dbInfo.name];var deferredOperation={};deferredOperation.promise=new Promise$1(function(resolve){deferredOperation.resolve=resolve});dbInfo.deferredOperations.push(deferredOperation);
dbInfo.dbReady=dbInfo.dbReady?dbInfo.dbReady.then(function(){return deferredOperation.promise}):deferredOperation.promise}function _getConnection(dbInfo,upgradeNeeded){return new Promise$1(function(resolve,reject){if(dbInfo.db)if(upgradeNeeded)_deferReadiness(dbInfo),dbInfo.db.close();else return resolve(dbInfo.db);var dbArgs=[dbInfo.name];upgradeNeeded&&dbArgs.push(dbInfo.version);var openreq=idb.open.apply(idb,dbArgs);upgradeNeeded&&(openreq.onupgradeneeded=function(e){var db=openreq.result;try{db.createObjectStore(dbInfo.storeName),
1>=e.oldVersion&&db.createObjectStore("local-forage-detect-blob-support")}catch(ex){if("ConstraintError"===ex.name)console.warn('The database "'+dbInfo.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+dbInfo.storeName+'" already exists.');else throw ex;}});openreq.onerror=function(e){e.preventDefault();reject(openreq.error)};openreq.onsuccess=function(){resolve(openreq.result);var deferredOperation=dbContexts[dbInfo.name].deferredOperations.pop();
deferredOperation&&deferredOperation.resolve()}})}function _encodeBlob(blob){return new Promise$1(function(resolve,reject){var reader=new FileReader;reader.onerror=reject;reader.onloadend=function(e){e=btoa(e.target.result||"");resolve({__local_forage_encoded_blob:!0,data:e,type:blob.type})};reader.readAsBinaryString(blob)})}function _decodeBlob(encodedBlob){for(var bin=atob(encodedBlob.data),length=bin.length,buf=new ArrayBuffer(length),arr=new Uint8Array(buf),i=0;i<length;i++)arr[i]=bin.charCodeAt(i);
return createBlob([buf],{type:encodedBlob.type})}function _fullyReady(callback){var self=this,promise=self._initReady().then(function(){var dbContext=dbContexts[self._dbInfo.name];if(dbContext&&dbContext.dbReady)return dbContext.dbReady});executeTwoCallbacks(promise,callback,callback);return promise}function _tryReconnect(dbInfo){_deferReadiness(dbInfo);for(var forages=dbContexts[dbInfo.name].forages,i=0;i<forages.length;i++)forages[i]._dbInfo.db&&(forages[i]._dbInfo.db.close(),forages[i]._dbInfo.db=
null);return _getConnection(dbInfo,!1).then(function(db){for(var j=0;j<forages.length;j++)forages[j]._dbInfo.db=db})["catch"](function(err){var deferredOperation=dbContexts[dbInfo.name].deferredOperations.pop();deferredOperation&&deferredOperation.reject(err);throw err;})}function createTransaction(dbInfo,mode,callback){try{var tx=dbInfo.db.transaction(dbInfo.storeName,mode);callback(null,tx)}catch(err){if(!dbInfo.db||"InvalidStateError"===err.name)return _tryReconnect(dbInfo).then(function(){var tx=
dbInfo.db.transaction(dbInfo.storeName,mode);callback(null,tx)});callback(err)}}function stringToBuffer(serializedString){var bufferLength=.75*serializedString.length,len=serializedString.length,p=0;"\x3d"===serializedString[serializedString.length-1]&&(bufferLength--,"\x3d"===serializedString[serializedString.length-2]&&bufferLength--);var buffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(buffer);for(bufferLength=0;bufferLength<len;bufferLength+=4){var encoded1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(serializedString[bufferLength]);
var encoded2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(serializedString[bufferLength+1]);var encoded3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(serializedString[bufferLength+2]);var encoded4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(serializedString[bufferLength+3]);bytes[p++]=encoded1<<2|encoded2>>4;bytes[p++]=(encoded2&15)<<4|encoded3>>2;bytes[p++]=(encoded3&3)<<6|encoded4&63}return buffer}function bufferToString(buffer){buffer=
new Uint8Array(buffer);var base64String="",i;for(i=0;i<buffer.length;i+=3)base64String+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[buffer[i]>>2],base64String+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(buffer[i]&3)<<4|buffer[i+1]>>4],base64String+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(buffer[i+1]&15)<<2|buffer[i+2]>>6],base64String+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[buffer[i+2]&63];2===
buffer.length%3?base64String=base64String.substring(0,base64String.length-1)+"\x3d":1===buffer.length%3&&(base64String=base64String.substring(0,base64String.length-2)+"\x3d\x3d");return base64String}function _setItem(key,value$jscomp$0,callback,retriesLeft){var self=this;key=normalizeKey(key);var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){void 0===value$jscomp$0&&(value$jscomp$0=null);var originalValue=value$jscomp$0,dbInfo=self._dbInfo;dbInfo.serializer.serialize(value$jscomp$0,
function(value,error$jscomp$0){error$jscomp$0?reject(error$jscomp$0):dbInfo.db.transaction(function(t$jscomp$0){t$jscomp$0.executeSql("INSERT OR REPLACE INTO "+dbInfo.storeName+" (key, value) VALUES (?, ?)",[key,value],function(){resolve(originalValue)},function(t,error){reject(error)})},function(sqlError){sqlError.code===sqlError.QUOTA_ERR&&(0<retriesLeft?resolve(_setItem.apply(self,[key,originalValue,callback,retriesLeft-1])):reject(sqlError))})})})["catch"](reject)});executeCallback(promise,callback);
return promise}function callWhenReady(localForageInstance,libraryMethod){localForageInstance[libraryMethod]=function(){var _args=arguments;return localForageInstance.ready().then(function(){return localForageInstance[libraryMethod].apply(localForageInstance,_args)})}}function extend(){for(var i=1;i<arguments.length;i++){var arg=arguments[i];if(arg)for(var _key in arg)arg.hasOwnProperty(_key)&&(isArray(arg[_key])?arguments[0][_key]=arg[_key].slice():arguments[0][_key]=arg[_key])}return arguments[0]}
var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},idb=function(){if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!==typeof mozIndexedDB)return mozIndexedDB;if("undefined"!==typeof OIndexedDB)return OIndexedDB;if("undefined"!==typeof msIndexedDB)return msIndexedDB}();
"undefined"===typeof Promise&&_dereq_(3);var Promise$1=Promise,supportsBlobs,dbContexts,toString=Object.prototype.toString;_dereq_={_driver:"asyncStorage",_initStorage:function(options){function ignoreErrors(){return Promise$1.resolve()}var self=this,dbInfo={db:null};if(options)for(var i in options)dbInfo[i]=options[i];dbContexts||(dbContexts={});var dbContext=dbContexts[dbInfo.name];dbContext||(dbContext={forages:[],db:null,dbReady:null,deferredOperations:[]},dbContexts[dbInfo.name]=dbContext);dbContext.forages.push(self);
self._initReady||(self._initReady=self.ready,self.ready=_fullyReady);options=[];for(i=0;i<dbContext.forages.length;i++){var forage=dbContext.forages[i];forage!==self&&options.push(forage._initReady()["catch"](ignoreErrors))}var forages=dbContext.forages.slice(0);return Promise$1.all(options).then(function(){dbInfo.db=dbContext.db;return _getConnection(dbInfo,!1)}).then(function(db){dbInfo.db=db;var JSCompiler_inline_result=self._defaultConfig.version;if(dbInfo.db){var isNewStore=!dbInfo.db.objectStoreNames.contains(dbInfo.storeName),
isUpgrade=dbInfo.version>dbInfo.db.version;dbInfo.version<dbInfo.db.version&&(dbInfo.version!==JSCompiler_inline_result&&console.warn('The database "'+dbInfo.name+"\" can't be downgraded from version "+dbInfo.db.version+" to version "+dbInfo.version+"."),dbInfo.version=dbInfo.db.version);isUpgrade||isNewStore?(isNewStore&&(JSCompiler_inline_result=dbInfo.db.version+1,JSCompiler_inline_result>dbInfo.version&&(dbInfo.version=JSCompiler_inline_result)),JSCompiler_inline_result=!0):JSCompiler_inline_result=
!1}else JSCompiler_inline_result=!0;return JSCompiler_inline_result?_getConnection(dbInfo,!0):db}).then(function(db){dbInfo.db=dbContext.db=db;self._dbInfo=dbInfo;for(db=0;db<forages.length;db++){var forage=forages[db];forage!==self&&(forage._dbInfo.db=dbInfo.db,forage._dbInfo.version=dbInfo.version)}})},_support:function(){try{if(!idb)return!1;var isSafari="undefined"!==typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),
hasFetch="function"===typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!isSafari||hasFetch)&&"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(iterator,callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){createTransaction(self._dbInfo,"readonly",function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).openCursor(),iterationNumber=
1;req.onsuccess=function(){var cursor=req.result;if(cursor){var value=cursor.value;value&&value.__local_forage_encoded_blob&&(value=_decodeBlob(value));value=iterator(value,cursor.key,iterationNumber++);if(void 0!==value)resolve(value);else cursor["continue"]()}else resolve()};req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})})["catch"](reject)});executeCallback(promise,callback);return promise},getItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=new Promise$1(function(resolve,
reject){self.ready().then(function(){createTransaction(self._dbInfo,"readonly",function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).get(key);req.onsuccess=function(){var value=req.result;void 0===value&&(value=null);value&&value.__local_forage_encoded_blob&&(value=_decodeBlob(value));resolve(value)};req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})})["catch"](reject)});executeCallback(promise,callback);return promise},setItem:function(key,
value$jscomp$0,callback){var self=this;key=normalizeKey(key);var promise=new Promise$1(function(resolve,reject){var dbInfo;self.ready().then(function(){dbInfo=self._dbInfo;return"[object Blob]"===toString.call(value$jscomp$0)?_checkBlobSupport(dbInfo.db).then(function(blobSupport){return blobSupport?value$jscomp$0:_encodeBlob(value$jscomp$0)}):value$jscomp$0}).then(function(value){createTransaction(self._dbInfo,"readwrite",function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).put(value,
key);null===value&&(value=void 0);transaction.oncomplete=function(){void 0===value&&(value=null);resolve(value)};transaction.onabort=transaction.onerror=function(){reject(req.error?req.error:req.transaction.error)}}catch(e){reject(e)}})})["catch"](reject)});executeCallback(promise,callback);return promise},removeItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){createTransaction(self._dbInfo,"readwrite",
function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName)["delete"](key);transaction.oncomplete=function(){resolve()};transaction.onerror=function(){reject(req.error)};transaction.onabort=function(){reject(req.error?req.error:req.transaction.error)}}catch(e){reject(e)}})})["catch"](reject)});executeCallback(promise,callback);return promise},clear:function(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){createTransaction(self._dbInfo,
"readwrite",function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).clear();transaction.oncomplete=function(){resolve()};transaction.onabort=transaction.onerror=function(){reject(req.error?req.error:req.transaction.error)}}catch(e){reject(e)}})})["catch"](reject)});executeCallback(promise,callback);return promise},length:function(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){createTransaction(self._dbInfo,
"readonly",function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).count();req.onsuccess=function(){resolve(req.result)};req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})})["catch"](reject)});executeCallback(promise,callback);return promise},key:function(n,callback){var self=this,promise=new Promise$1(function(resolve,reject){if(0>n)resolve(null);else self.ready().then(function(){createTransaction(self._dbInfo,"readonly",function(err,
transaction){if(err)return reject(err);try{var advanced=!1,req=transaction.objectStore(self._dbInfo.storeName).openCursor();req.onsuccess=function(){var cursor=req.result;cursor?0===n?resolve(cursor.key):advanced?resolve(cursor.key):(advanced=!0,cursor.advance(n)):resolve(null)};req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})})["catch"](reject)});executeCallback(promise,callback);return promise},keys:function(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){createTransaction(self._dbInfo,
"readonly",function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self._dbInfo.storeName).openCursor(),keys=[];req.onsuccess=function(){var cursor=req.result;cursor?(keys.push(cursor.key),cursor["continue"]()):resolve(keys)};req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})})["catch"](reject)});executeCallback(promise,callback);return promise}};var BLOB_TYPE_PREFIX_REGEX=/^~~local_forage_type~([^~]+)~/,toString$1=Object.prototype.toString,localforageSerializer=
{serialize:function(value,callback){var valueType="";value&&(valueType=toString$1.call(value));if(value&&("[object ArrayBuffer]"===valueType||value.buffer&&"[object ArrayBuffer]"===toString$1.call(value.buffer))){var marker="__lfsc__:";if(value instanceof ArrayBuffer){var buffer=value;marker+="arbf"}else buffer=value.buffer,"[object Int8Array]"===valueType?marker+="si08":"[object Uint8Array]"===valueType?marker+="ui08":"[object Uint8ClampedArray]"===valueType?marker+="uic8":"[object Int16Array]"===
valueType?marker+="si16":"[object Uint16Array]"===valueType?marker+="ur16":"[object Int32Array]"===valueType?marker+="si32":"[object Uint32Array]"===valueType?marker+="ui32":"[object Float32Array]"===valueType?marker+="fl32":"[object Float64Array]"===valueType?marker+="fl64":callback(Error("Failed to get type for BinaryArray"));callback(marker+bufferToString(buffer))}else if("[object Blob]"===valueType)valueType=new FileReader,valueType.onload=function(){var str="~~local_forage_type~"+value.type+
"~"+bufferToString(this.result);callback("__lfsc__:blob"+str)},valueType.readAsArrayBuffer(value);else try{callback(JSON.stringify(value))}catch(e){console.error("Couldn't convert value into a JSON string: ",value),callback(null,e)}},deserialize:function(value){if("__lfsc__:"!==value.substring(0,9))return JSON.parse(value);var serializedString=value.substring(13);value=value.substring(9,13);if("blob"===value&&BLOB_TYPE_PREFIX_REGEX.test(serializedString)){var matcher=serializedString.match(BLOB_TYPE_PREFIX_REGEX);
var blobType=matcher[1];serializedString=serializedString.substring(matcher[0].length)}serializedString=stringToBuffer(serializedString);switch(value){case "arbf":return serializedString;case "blob":return createBlob([serializedString],{type:blobType});case "si08":return new Int8Array(serializedString);case "ui08":return new Uint8Array(serializedString);case "uic8":return new Uint8ClampedArray(serializedString);case "si16":return new Int16Array(serializedString);case "ur16":return new Uint16Array(serializedString);
case "si32":return new Int32Array(serializedString);case "ui32":return new Uint32Array(serializedString);case "fl32":return new Float32Array(serializedString);case "fl64":return new Float64Array(serializedString);default:throw Error("Unkown type: "+value);}},stringToBuffer:stringToBuffer,bufferToString:bufferToString};exports={_driver:"webSQLStorage",_initStorage:function(options){var self=this,dbInfo={db:null};if(options)for(var i in options)dbInfo[i]="string"!==typeof options[i]?options[i].toString():
options[i];options=new Promise$1(function(resolve,reject){try{dbInfo.db=openDatabase(dbInfo.name,String(dbInfo.version),dbInfo.description,dbInfo.size)}catch(e){return reject(e)}dbInfo.db.transaction(function(t$jscomp$0){t$jscomp$0.executeSql("CREATE TABLE IF NOT EXISTS "+dbInfo.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){self._dbInfo=dbInfo;resolve()},function(t,error){reject(error)})})});dbInfo.serializer=localforageSerializer;return options},_support:"function"===typeof openDatabase,
iterate:function(iterator,callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t$jscomp$0){t$jscomp$0.executeSql("SELECT * FROM "+dbInfo.storeName,[],function(t,results){t=results.rows;results=t.length;for(var i=0;i<results;i++){var item=t.item(i),result=item.value;result&&(result=dbInfo.serializer.deserialize(result));result=iterator(result,item.key,i+1);if(void 0!==result){resolve(result);return}}resolve()},
function(t,error){reject(error)})})})["catch"](reject)});executeCallback(promise,callback);return promise},getItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t$jscomp$0){t$jscomp$0.executeSql("SELECT * FROM "+dbInfo.storeName+" WHERE key \x3d ? LIMIT 1",[key],function(t,results){(t=results.rows.length?results.rows.item(0).value:null)&&(t=dbInfo.serializer.deserialize(t));
resolve(t)},function(t,error){reject(error)})})})["catch"](reject)});executeCallback(promise,callback);return promise},setItem:function(key,value,callback){return _setItem.apply(this,[key,value,callback,1])},removeItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t$jscomp$0){t$jscomp$0.executeSql("DELETE FROM "+dbInfo.storeName+" WHERE key \x3d ?",[key],
function(){resolve()},function(t,error){reject(error)})})})["catch"](reject)});executeCallback(promise,callback);return promise},clear:function(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t$jscomp$0){t$jscomp$0.executeSql("DELETE FROM "+dbInfo.storeName,[],function(){resolve()},function(t,error){reject(error)})})})["catch"](reject)});executeCallback(promise,callback);return promise},length:function(callback){var self=
this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t$jscomp$0){t$jscomp$0.executeSql("SELECT COUNT(key) as c FROM "+dbInfo.storeName,[],function(t,results){t=results.rows.item(0).c;resolve(t)},function(t,error){reject(error)})})})["catch"](reject)});executeCallback(promise,callback);return promise},key:function(n,callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=
self._dbInfo;dbInfo.db.transaction(function(t$jscomp$0){t$jscomp$0.executeSql("SELECT key FROM "+dbInfo.storeName+" WHERE id \x3d ? LIMIT 1",[n+1],function(t,results){t=results.rows.length?results.rows.item(0).key:null;resolve(t)},function(t,error){reject(error)})})})["catch"](reject)});executeCallback(promise,callback);return promise},keys:function(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t$jscomp$0){t$jscomp$0.executeSql("SELECT key FROM "+
dbInfo.storeName,[],function(t,results){t=[];for(var i=0;i<results.rows.length;i++)t.push(results.rows.item(i).key);resolve(t)},function(t,error){reject(error)})})})["catch"](reject)});executeCallback(promise,callback);return promise}};try{var JSCompiler_inline_result$jscomp$0="undefined"!==typeof localStorage&&"setItem"in localStorage&&"function"===typeof localStorage.setItem}catch(e){JSCompiler_inline_result$jscomp$0=!1}var isArray=Array.isArray||function(arg){return"[object Array]"===Object.prototype.toString.call(arg)},
DefinedDrivers={},DriverSupport={},DefaultDrivers={INDEXEDDB:_dereq_,WEBSQL:exports,LOCALSTORAGE:{_driver:"localStorageWrapper",_initStorage:function(options){var dbInfo={};if(options)for(var i in options)dbInfo[i]=options[i];dbInfo.keyPrefix=dbInfo.name+"/";dbInfo.storeName!==this._defaultConfig.storeName&&(dbInfo.keyPrefix+=dbInfo.storeName+"/");try{localStorage.setItem("_localforage_support_test",!0);localStorage.removeItem("_localforage_support_test");var JSCompiler_inline_result=!1}catch(e){JSCompiler_inline_result=
!0}if(JSCompiler_inline_result&&!(0<localStorage.length))return Promise$1.reject();this._dbInfo=dbInfo;dbInfo.serializer=localforageSerializer;return Promise$1.resolve()},_support:JSCompiler_inline_result$jscomp$0,iterate:function(iterator,callback){var self=this,promise=self.ready().then(function(){for(var dbInfo=self._dbInfo,keyPrefix=dbInfo.keyPrefix,keyPrefixLength=keyPrefix.length,length=localStorage.length,iterationNumber=1,i=0;i<length;i++){var key=localStorage.key(i);if(0===key.indexOf(keyPrefix)){var value=
localStorage.getItem(key);value&&(value=dbInfo.serializer.deserialize(value));value=iterator(value,key.substring(keyPrefixLength),iterationNumber++);if(void 0!==value)return value}}});executeCallback(promise,callback);return promise},getItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=self.ready().then(function(){var dbInfo=self._dbInfo,result=localStorage.getItem(dbInfo.keyPrefix+key);result&&(result=dbInfo.serializer.deserialize(result));return result});executeCallback(promise,
callback);return promise},setItem:function(key,value$jscomp$0,callback){var self=this;key=normalizeKey(key);var promise=self.ready().then(function(){void 0===value$jscomp$0&&(value$jscomp$0=null);var originalValue=value$jscomp$0;return new Promise$1(function(resolve,reject){var dbInfo=self._dbInfo;dbInfo.serializer.serialize(value$jscomp$0,function(value,error){if(error)reject(error);else try{localStorage.setItem(dbInfo.keyPrefix+key,value),resolve(originalValue)}catch(e){"QuotaExceededError"!==e.name&&
"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||reject(e),reject(e)}})})});executeCallback(promise,callback);return promise},removeItem:function(key,callback){var self=this;key=normalizeKey(key);var promise=self.ready().then(function(){localStorage.removeItem(self._dbInfo.keyPrefix+key)});executeCallback(promise,callback);return promise},clear:function(callback){var self=this,promise=self.ready().then(function(){for(var keyPrefix=self._dbInfo.keyPrefix,i=localStorage.length-1;0<=i;i--){var key=localStorage.key(i);
0===key.indexOf(keyPrefix)&&localStorage.removeItem(key)}});executeCallback(promise,callback);return promise},length:function(callback){var promise=this.keys().then(function(keys){return keys.length});executeCallback(promise,callback);return promise},key:function(n,callback){var self=this,promise=self.ready().then(function(){var dbInfo=self._dbInfo;try{var result=localStorage.key(n)}catch(error){result=null}result&&(result=result.substring(dbInfo.keyPrefix.length));return result});executeCallback(promise,
callback);return promise},keys:function(callback){var self=this,promise=self.ready().then(function(){for(var dbInfo=self._dbInfo,length=localStorage.length,keys=[],i=0;i<length;i++){var itemKey=localStorage.key(i);0===itemKey.indexOf(dbInfo.keyPrefix)&&keys.push(itemKey.substring(dbInfo.keyPrefix.length))}return keys});executeCallback(promise,callback);return promise}}},LibraryMethods="clear getItem iterate key keys length removeItem setItem".split(" "),DefaultConfig={description:"",driver:[DefaultDrivers.INDEXEDDB._driver,
DefaultDrivers.WEBSQL._driver,DefaultDrivers.LOCALSTORAGE._driver].slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};JSCompiler_inline_result$jscomp$0=new (function(){function LocalForage(options){if(!(this instanceof LocalForage))throw new TypeError("Cannot call a class as a function");for(var driverTypeKey in DefaultDrivers)if(DefaultDrivers.hasOwnProperty(driverTypeKey)){var driver=DefaultDrivers[driverTypeKey],driverName=driver._driver;this[driverTypeKey]=driverName;
DefinedDrivers[driverName]||this.defineDriver(driver)}this._defaultConfig=extend({},DefaultConfig);this._config=extend({},this._defaultConfig,options);this._initDriver=this._driverSet=null;this._ready=!1;this._dbInfo=null;this._wrapLibraryMethodsWithReady();this.setDriver(this._config.driver)["catch"](function(){})}LocalForage.prototype.config=function(options){if("object"===("undefined"===typeof options?"undefined":_typeof(options))){if(this._ready)return Error("Can't call config() after localforage has been used.");
for(var i in options){"storeName"===i&&(options[i]=options[i].replace(/\W/g,"_"));if("version"===i&&"number"!==typeof options[i])return Error("Database version must be a number.");this._config[i]=options[i]}return"driver"in options&&options.driver?this.setDriver(this._config.driver):!0}return"string"===typeof options?this._config[options]:this._config};LocalForage.prototype.defineDriver=function(driverObject,callback,errorCallback){var promise=new Promise$1(function(resolve,reject){try{var driverName=
driverObject._driver,complianceError=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(driverObject._driver){for(var driverMethods=LibraryMethods.concat("_initStorage"),i=0,len=driverMethods.length;i<len;i++){var customDriverMethod=driverMethods[i];if(!customDriverMethod||!driverObject[customDriverMethod]||"function"!==typeof driverObject[customDriverMethod]){reject(complianceError);return}}complianceError=function(support){DefinedDrivers[driverName]&&
console.info("Redefining LocalForage driver: "+driverName);DefinedDrivers[driverName]=driverObject;DriverSupport[driverName]=support;resolve()};"_support"in driverObject?driverObject._support&&"function"===typeof driverObject._support?driverObject._support().then(complianceError,reject):complianceError(!!driverObject._support):complianceError(!0)}else reject(complianceError)}catch(e){reject(e)}});executeTwoCallbacks(promise,callback,errorCallback);return promise};LocalForage.prototype.driver=function(){return this._driver||
null};LocalForage.prototype.getDriver=function(driverName,callback,errorCallback){driverName=DefinedDrivers[driverName]?Promise$1.resolve(DefinedDrivers[driverName]):Promise$1.reject(Error("Driver not found."));executeTwoCallbacks(driverName,callback,errorCallback);return driverName};LocalForage.prototype.getSerializer=function(callback){var serializerPromise=Promise$1.resolve(localforageSerializer);executeTwoCallbacks(serializerPromise,callback);return serializerPromise};LocalForage.prototype.ready=
function(callback){var self=this,promise=self._driverSet.then(function(){null===self._ready&&(self._ready=self._initDriver());return self._ready});executeTwoCallbacks(promise,callback,callback);return promise};LocalForage.prototype.setDriver=function(drivers,callback,errorCallback){function setDriverToConfig(){self._config.driver=self.driver()}function extendSelfWithDriver(driver){self._extend(driver);setDriverToConfig();self._ready=self._initStorage(self._config);return self._ready}function initDriver(supportedDrivers){return function(){function driverPromiseLoop(){for(;currentDriverIndex<
supportedDrivers.length;){var driverName=supportedDrivers[currentDriverIndex];currentDriverIndex++;self._dbInfo=null;self._ready=null;return self.getDriver(driverName).then(extendSelfWithDriver)["catch"](driverPromiseLoop)}setDriverToConfig();self._driverSet=Promise$1.reject(Error("No available storage method found."));return self._driverSet}var currentDriverIndex=0;return driverPromiseLoop()}}var self=this;isArray(drivers)||(drivers=[drivers]);var supportedDrivers=this._getSupportedDrivers(drivers);
this._driverSet=(null!==this._driverSet?this._driverSet["catch"](function(){return Promise$1.resolve()}):Promise$1.resolve()).then(function(){var driverName=supportedDrivers[0];self._dbInfo=null;self._ready=null;return self.getDriver(driverName).then(function(driver){self._driver=driver._driver;setDriverToConfig();self._wrapLibraryMethodsWithReady();self._initDriver=initDriver(supportedDrivers)})})["catch"](function(){setDriverToConfig();self._driverSet=Promise$1.reject(Error("No available storage method found."));
return self._driverSet});executeTwoCallbacks(this._driverSet,callback,errorCallback);return this._driverSet};LocalForage.prototype.supports=function(driverName){return!!DriverSupport[driverName]};LocalForage.prototype._extend=function(libraryMethodsAndProperties){extend(this,libraryMethodsAndProperties)};LocalForage.prototype._getSupportedDrivers=function(drivers){for(var supportedDrivers=[],i=0,len=drivers.length;i<len;i++){var driverName=drivers[i];this.supports(driverName)&&supportedDrivers.push(driverName)}return supportedDrivers};
LocalForage.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,len=LibraryMethods.length;i<len;i++)callWhenReady(this,LibraryMethods[i])};LocalForage.prototype.createInstance=function(options){return new LocalForage(options)};return LocalForage}());module.exports=JSCompiler_inline_result$jscomp$0},{3:3}]},{},[4])(4)})}
//# sourceMappingURL=module$node_modules$localforage$dist$localforage.js.map
